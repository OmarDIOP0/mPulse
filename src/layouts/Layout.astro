---
// src/layouts/MainLayout.astro
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';

const { title } = Astro.props;
import Logo from '../assets/icons/logo.jpg';
---
<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title} | mPulse - Gestion de budget intelligente</title>
    <meta name="description" content="mPulse est une application de gestion de budget qui simplifie la gestion financière pour les entreprises et les particuliers. Découvrez nos fonctionnalités avancées." />
    <link rel="icon" href={Logo.src} type="image/x-icon"/>

    
    <!-- Importations CSS critiques -->
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      :root {
        --color-primary: #00377d;
        --color-secondary: #ffd100;
        --color-danger: #ff0000;
        --color-dark: #09090b;
        --color-light: #f2f5f9;
      }
    </style>
</head>
<body class="font-sans bg-light text-dark">
<div class="sticky top-0 z-[100]">
    <Navbar />
  </div>
    
    <main class="min-h-screen">
        <slot />
    </main>
    
    <Footer />
    
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="//unpkg.com/alpinejs" defer></script>
</body>

<!-- Ajoutez ce script à la fin du body -->
<script>
    // Gestion du menu mobile améliorée
    document.addEventListener('DOMContentLoaded', function() {
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        if (menuButton && mobileMenu) {
            menuButton.addEventListener('click', function() {
                const isOpen = mobileMenu.classList.toggle('hidden');
                document.body.classList.toggle('menu-open', !isOpen);
                
                // Animation
                if (!isOpen) {
                    mobileMenu.style.opacity = '0';
                    mobileMenu.style.transform = 'translateY(-10px)';
                    setTimeout(() => {
                        mobileMenu.style.opacity = '1';
                        mobileMenu.style.transform = 'translateY(0)';
                    }, 10);
                }
            }); 
            
            // Fermer le menu quand on clique sur un lien
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                    document.body.classList.remove('menu-open');
                });
            });
        }
    });
</script>
</html>